:orphan:

.. Auto-generated by help-rst from "mirtk calculate -h" output

calculate
=========

.. program:: calculate


Synopsis
--------

::

    calculate <input> [options]


Description
-----------

.. include:: _descriptions/calculate.rst



Input options
-------------

.. option:: -scalars <name>

   Name of input point data array. (default: active SCALARS array)


Data masking options
--------------------

.. option:: -even

   Exclude values which are not an even number when cast to an integer.

.. option:: -odd

   Exclude values which are not an odd number when cast to an integer.

.. option:: -label <value|lower..upper>...

   Include data points with a value equal to either one of the given values.
   Closed intervals of values can be specified as "lower..upper".
   For example, "-label 1 3 5..6 10 20..50". This option is a shorthand for
   :option:`-mask-all` :option:`-threshold-inside` <lower> <upper> :option:`-invert-mask`
   where one :option:`-threshold-inside` operation is performed for each argument.

.. option:: -mask <float|file>

   Exclude values equal a given threshold or with zero input mask value.
   Note that this does not modify the data values, but only marks them to be
   ignored from now on. Use :option:`-pad` following this operation to
   replace these values by a background value.

.. option:: -mask-all

   Exclude all values.

.. option:: -reset-mask

   Reset mask to include all values again.

.. option:: -invert-mask

   Invert mask to include all values that where excluded before and
   exclude all values that were included before.

.. option:: -set, -inside <value>

   Set new value for all currently included data values.

.. option:: -pad, -outside <value>

   Set new value for all currently excluded data values.


Data thresholding options
-------------------------

.. option:: -threshold <lower> [<upper>]

   This masking operation is equivalent to :option:`-threshold-outside`.
   When no upper threshold is specified, it defaults to +inf. Therefore,
   "-threshold 0" will exclude all negative values.

.. option:: -percentile-threshold, -pct-threshold <lower>

   This masking operation is equivalent to :option:`-threshold-outside-percentiles`.
   with an upper threshold of +inf. Therefore, "-threshold 0" excludes all negative values.

.. option:: -threshold-percentiles, -threshold-pcts <lower> <upper>

   This masking operation is equivalent to :option:`-threshold-outside-percentiles`.

.. option:: -threshold-inside, -mask-inside <lower> <upper>

   Exclude values which are inside a given closed interval.
   When the lower threshold is greater than the upper threshold,
   values less than or equal to the upper threshold and values greater
   than or equal to the lower threshold are excluded.

.. option:: -threshold-inside-percentiles, -threshold-inside-pcts, -mask-inside-percentiles, -mask-inside-pct <lower> <upper>

   Exclude values which are inside a given closed interval of percentiles.
   When the lower percentile is greater than the upper percentile,
   values less than or equal to the upper percentile and values greater
   than or equal to the lower percentile are excluded.

.. option:: -threshold-outside, -mask-outside <lower> <upper>

   Exclude values which are outside a given open interval.
   When the lower threshold is greater than the upper threshold,
   values inside the closed interval <upper>..<lower> are excluded.

.. option:: -threshold-outside-percentiles, -threshold-outside-pcts, -mask-outside-percentiles, -mask-outside-pcts <lower> <upper>

   Exclude values which are outside a given open interval of percentiles.
   When the lower percentile is greater than the upper percentile,
   values inside the closed interval <upper>..<lower> are excluded.

.. option:: -threshold-lt, -lower-threshold, -mask-lt <value>

   Exclude values less than a given threshold.

.. option:: -threshold-lt-percentile, -threshold-lt-pct, -lower-percentile-threshold, -lower-pct-threshold, -mask-lt-percentile, -mask-lt-pct <value>

   Exclude values less than a given precentile.

.. option:: -threshold-le, -mask-le, -mask-below <value>

   Exclude values less than or equal to a given threshold.

.. option:: -threshold-le-percentile, -threshold-le-pct, -mask-le-percentile, -mask-le-pct, -mask-below-percentile, -mask-below-pct <value>

   Exclude values less than or equal to a given percentile.

.. option:: -threshold-ge, -mask-ge, -mask-above <value>

   Exclude values greater than or equal to a given threshold.

.. option:: -threshold-ge-percentile, -threshold-ge-pct, -mask-ge-percentile, -mask-ge-pct, -mask-above-percentile, -mask-above-pct <value>

   Exclude values greater than or equal to a given percentile.

.. option:: -threshold-gt, -upper-threshold, -mask-gt <value>

   Exclude values greater than a given threshold.

.. option:: -threshold-gt-percentile, -threshold-gt-pct, -upper-percentile-threshold, -upper-pct-threshold, -mask-gt-percentile, -mask-gt-pct <value>

   Exclude values greater than a given percentile.


Data rescaling options
----------------------

.. option:: -binarize <lower> [<upper>]

   Set values inside the closed interval <lower>..<upper> to one,
   and all other values to zero. The default upper threshold is +inf.
   When the lower threshold is greater than the upper threshold,
   values inside the closed interval <upper>..<lower> are set to zero
   and all other values to one instead. This operation is short for:
   :option:`-threshold-inside` <lower> <upper> :option:`-set` 1 :option:`-pad` 0

.. option:: -clamp <lower> <upper>

   Clamp values which are less than a lower or greater than an upper threshold.

.. option:: -clamp-percentiles, -clamp-pcts <lower> <upper>

   Clamp values which are less than a lower percentile or greater than an upper percentile.

.. option:: -clamp-below, -clamp-lt <value>

   Clamp values less than a given threshold.

.. option:: -clamp-below-percentile, -clamp-below-pct, -clamp-lt-percentile, -clamp-lt-pct <value>

   Clamp values less than a given percentile.

.. option:: -clamp-above, -clamp-gt <value>

   Clamp values greater than a given threshold.

.. option:: -clamp-above-percentile, -clamp-above-pct, -clamp-gt-percentile, -clamp-gt-pct <value>

   Clamp values greater than a given percentile.

.. option:: -rescale <min> <max>

   Linearly rescale values to the interval [min, max].


Arithmetic operation options
----------------------------

.. option:: -add, -plus <value|file>

   Add constant value or data sequence read from specified file.
   Another name for this option is the '+' sign, see Examples.

.. option:: -sub, -subtract, -minus <value|file>

   Subtract constant value or data sequence read from specified file.
   Another name for this option is the '-' sign, see Examples.

.. option:: -mul, -multiply-with, -times <value|file>

   Multiply by constant value or data sequence read from specified file.
   Another name for this option is the '*' sign, see Examples.

.. option:: -div, -divide-by, -over <value|file>

   Divide by constant value or data sequence read from specified file.
   When dividing by zero values in the input file, the result is NaN.
   Use :option:`-mask` with argument NaN and :option:`-pad` to replace
   these undefined values by a constant such as zero.
   Another name for this option is the '/' sign, see Examples.

.. option:: -div-with-zero <value|file>

   Same as :option:`-div` but set result to zero instead of NaN in case of
   a division by zero due to a zero value in the specified file.

.. option:: -abs

   Replace values by their respective absolute value.

.. option:: -pow, -power <exponent>

   Raise values to the power of the given exponent.

.. option:: -sq, -square

   Raise values to the power of 2 (i.e, -pow 2).

.. option:: -sqrt

   Calculate square root of each value (i.e, -pow .5).

.. option:: -exp

   Calculate exponential of data sequence.

.. option:: -log [<threshold>] [<base>]

   Compute logarithm after applying an optional threshold.
   (default threshold: min double, default base: e)

.. option:: -lb, -log2 [<threshold>]

   Compute binary logarithm, alias for :option:`-log` with base 2.

.. option:: -ln, -loge [<threshold>]

   Compute natural logarithm, alias for :option:`-log` with base e.

.. option:: -lg, -log10 [<threshold>]

   Compute logarithm to base 10, alias for :option:`-log` with base 10.


Data output options
-------------------

.. option:: -out, -o, -output <file> [<type>]

   Write current data sequence to file in the format of the input file.
   Output data type can be: uchar, short, ushort, int, uint, float, double.
   Another name for this option is the '=' sign, see Examples.


Data statistics options
-----------------------

.. option:: -append <file>

   Append output to a file. (default: STDOUT)

.. option:: -delimiter, -delim, -d, -sep

   Delimiting character(s). (default: '')

.. option:: -header [<name>...]

   Request output of header line if delimiter was specified as well.
   If the output is appended to a text file, the header is only printed
   if it does not exist. If no or fewer custom column names are given,
   the default names for each statistic are printed. (default: none)

.. option:: -prefix <str>...

   One or more prefix strings to print. If no delimiter is specified,
   the concatenated strings are printed before each line of the output.
   Otherwise, each prefix string is printed as entry for the first columns
   in the delimited output row, separated by the specified delimiter. (default: none)

.. option:: -precision, -digits <int>

   Number of significant digits. (default: 5)

.. option:: -mean, -avg, -average

   Print mean intensity. (default: on)

.. option:: -variance, -var

   Print variance of intensity values. (default: off)

.. option:: -sigma, -std, -stddev, -stdev, -sd

   Print standard deviation of intensity values. (default: on)

.. option:: -normal-distribution

   Print mean intensity and standard deviation of intensity values.
   Other option names: -mean+sigma, -mean+sd, -avg+std,... (default: off)

.. option:: -minimum, -min

   Print minimum intensity value. (default: off)

.. option:: -maximum, -max

   Print maximum intensity value. (default: off)

.. option:: -extrema, -minmax

   Print minimum and maximum intensity value. (default: on)

.. option:: -range

   Print range of intensity values (i.e., max - min). (default: off)

.. option:: -percentile, -pct, -p <n>...

   Print n-th percentile. (default: none)

.. option:: -lower-percentile-mean, -lpctavg <n>

   Print mean intensity of values less than or equal to the n-th percentile. (default: off)

.. option:: -upper-percentile-mean, -upctavg <n>

   Print mean intensity of values greater than or equal to the n-th percentile. (default: off)


Standard options
----------------

.. option:: -v, -verbose [n]

   Increase/Set verbosity of output messages. (default: 0)

.. option:: -debug [level]

   Increase/Set debug level for output of intermediate results. (default: 0)

.. option:: -version [major.minor]

   Print version and exit or set version to emulate.

.. option:: -revision

   Print revision (or version) number only and exit.

.. option:: -h, -help

   Print help and exit.


Terminal options
----------------

.. option:: -color, -nocolor

   Enable/disable colored output. (default: off)


Examples
--------


Example 1
~~~~~~~~~

**Command**::

      calculate mni305.nii.gz

**Output/Description**::

          Mean = 26.9753
          Standard deviation = 50.3525
          Extrema = [0, 254]
          Range = 254
    
      calculate mni305.nii.gz -pct 77
          77th percentile = 25
    
      calculate mni305.nii.gz -padding 25 -range -percentile 25 50 75 -prefix MNI305 '[>25]'
          MNI305 [>25] range = 254
          MNI305 [>25] 25th percentile = 69
          MNI305 [>25] 50th percentile = 113
          MNI305 [>25] 75th percentile = 150
    
      calculate mni305.nii.gz -d , -prefix MNI305
          MNI305,26.9753,50.3525,0,254,254 [no newline at end of line]
    
      calculate mni305.nii.gz -d , -prefix MNI305 -header
          ,Mean,Sigma,Min,Max,Range
          MNI305,26.9753,50.3525,0,254,254
    
      calculate mni305.nii.gz -d , -prefix MNI305 -header ID Mean SD
          ID,Mean,SD,Min,Max,Range
          MNI305,26.9753,50.3525,0,254,254
    
      calculate a.nii.gz + b.nii.gz = c.nii.gz
    
      calculate a.vtk + b.nii.gz - 10 / c.nii = d.vtk
          Adds data values at identical sequential memory indices in a and b,
          subtracts the constant 10, and then divides by the values in image c.
    
          Note: Operations are always executed from left to right,
                i.e., no mathematical operator precedence is considered!
