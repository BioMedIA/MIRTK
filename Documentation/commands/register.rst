:orphan:

.. Auto-generated by help-rst from "mirtk register -h" output

register
========

.. program:: register


Synopsis
--------

::

    register -images <images.lst> [options]
    register -image <image1> [-dof <dof1>] -image <image2> [-dof <dof2>]... [options]
    register -image <image1> <image2>... [options]
    register <image1> <image2>... [options]
    register <image_sequence> [options]
    register -pset <pointset1> [-dof <dof1>] -pset <pointset2> [-dof <dof2>]... [options]
    register <dataset1> <dataset2>... [options]
    register -pset <pointset1> <pointset2>... [options]
    register -image <image1> -points <pointset1> [-dof <dof1>]... [options]


Description
-----------

.. include:: _descriptions/register.rst



Output options
--------------

.. option:: -dofout <file>

   Write transformation to specified file.

.. option:: -output <file>

   Write (first) transformed source image to specified file.
   Given the flexibility of the energy function formulation,
   this option may not always give the desired output and is
   limited to standard pairwise image registration using a
   single image dissimilarity term. Use transform-image command
   with the :option:`-dofout` file as input otherwise.


Input options
-------------

.. option:: -image <file>...

   Input image to be registered. The order in which the images are
   given on the command-line corresponds to the image indices used
   in the registration energy formulation. The first input image has
   index 1 and is denoted by the symbol I(1) in the image similarity term.

.. option:: -pset <file>...

   Input points, curve(s), surface(s), or other simplicial complex(es).
   The order in which the point set files are given on the command-line
   corresponds to the point set indices used in the registration energy
   formulation. The first input point set has index 1 and is denoted by
   the symbol P(1), C(1), or S(1), respectively, in the point set distance
   measure (PDM) term.

.. option:: -dof <file>

   Specifies a pre-computed affine transformation to be applied to
   the preceeding image and/or polydata. Note the difference to :option:`-dofin`,
   which specifies an initial estimate of the :option:`-dofout` transformation.
   (default: none)

.. option:: -dof_i <file>

   Specifies a pre-computed affine transformation whose inverse is to be
   applied to the preceeding image and/or polydata (see :option:`-dof`). (default: none)

.. option:: -images <file>

   Text file with N lines containing the file names of each
   2D/3D input image, optionally followed by a space character and the
   associated (relative) acquisition time (in ms). If no acquisition
   time is given, the temporal offset of the image header is used.
   Images specified as positional arguments are read before the images
   named in this (then optional) text file and the index of the images
   given in the text file are offset by the number of images named
   as positional arguments or using :option:`-image`, respectively.

.. option:: -psets <file>

   Equivalent to :option:`-images`, but for point sets (:option:`-pset`).

.. option:: -dofs <file>

   Read names of affine transformations of input images from
   specified text file. The affine transformations are set as
   if the images had been transformed by these before. Hence,
   these transformations are not part of the output transformation.
   The text file must contain on each line the basename of the input image
   followed by the corresponding affine transformation file. Input images
   not included are assumed to not be further pre-transformed. (default: none)

.. option:: -dofins <file>

   Read pairwise transformations from the files specified
   in the given text file which lists for each pair-wise
   transformation the corresponding target image, followed
   by the source image and the name of the transformation file.
   Note that the target and source image names must be listed
   in the :option:`-images` list file. (default: none)

.. option:: -dofin <file>

   Read initial transformation from file if :option:`-dofins` not specified.
   When no initial guess is given, and the first transformation model is a
   homogeneous transformation, a translation which aligns image foreground centers
   of mass is used. The identity mapping ('Id' or 'identity') is used as initial guess
   for deformable models unless the <file> argument is 'guess' to align the centers.
   If the given transformation cannot be used directly as starting point of the
   registration, it will be approximated by an instance of the chosen transformation
   model at the initial resolution level. The input transformation may thus be of
   different type than the output transformation of the registration.
   (default: guess or Id/identity)

.. option:: -mask <file>

   Reference mask which defines the domain within which to evaluate the
   energy function (i.e. image similarity). The registered images will
   thus be resampled within the corresponding domain of the world system.
   By default, the foreground of the target image defines this domain.


Configuration options
---------------------

.. option:: -parin <file>

   Read parameters from configuration file. If <file> is "stdin" or "cin",
   the parameters are read from standard input instead. (default: none)

.. option:: -par <name> <value>

   Specify any parameter value usually found in :option:`-parin` file as command argument.
   The other configuration options are convenient shortcuts for commonly customized parameters.

.. option:: -model <m1>[+<m2>...]

   "Transformation model". Multiple models can be concatenated using a plus sign.
   (default: Rigid+Affine+FFD)

.. option:: -multi-level-model, -composition None|Sum|Fluid|LogSum

   "Multi-level transformation model" used to combine global affine transformation
   with the local free-form deformations at each resolution level. (default: Sum)

.. option:: -sim <value>

   Specifies concrete "Image (dis-)similarity" measure of SIM "Energy function" term.
   Most often used measures are MSE/SSD, NMI, and NCC/LNCC. (default: NMI)

.. option:: -bins <n>

   "No. of bins" used for NMI image similarity measure.

.. option:: -window <width> [<units> [<type>]]

   Local window used for (local) NCC/LNCC image similarity measure.
   A window <width> of zero corresponds to a global NCC measure.
   The <units> can be either "vox" (default) or "mm". The type
   of the window can be "box" (default), "sigma", "fwhm", or "fwtm",
   where the latter correspond to a Gaussian window with either the specified
   standard deviation, full width at half maximum, or full width at tenth maximum,
   respectively. The default is a box window with uniform weights for each voxel.

.. option:: -interp, -interpolation <mode>

   "Image interpolation" mode. (default: "Fast linear [with padding]")

.. option:: -extrap, -extrapolation <mode>

   "Image extrapolation" mode. (default: "Default" for used interpolation mode)

.. option:: -levels <from> [<to>]

   Image/FFD resolution levels. The <from> number corresponds to the "No. of levels",
   and the <to> number is the final level which is 1 by default.
   When images are given as input, the default number of levels is 4 and 1 otherwise.

.. option:: -level <n>

   Alias for :option:`-levels` <n> <n> which only performs the registration on a single level.

.. option:: -bg, -background, -padding <value>

   "Background value" (threshold) of input and output images (default: none)

.. option:: -ds <width>

   "Control point spacing" of free-form deformation on highest resolution level. (default: 4x min voxel size)

.. option:: -be <w>

   "Bending energy weight" of free-form deformation. (default: 0.001)

.. option:: -le <w> [<lambda>]

   "Linear energy weight" of free-form deformation. (default: 0)

.. option:: -tp <w>

   "Topology preservation weight" of free-form deformation. (default: 0)

.. option:: -vp <w>

   "Volume preservation weight" of free-form deformation. (default: 0)

.. option:: -lj, -jl, -log-jac, -jac <w>

   "LogJac penalty weight" of free-form deformation. For a classic FFD transformation model
   this penalty term is equivalent to the volume preservation term. When applied to the SVFFD
   model, however, this penalty applies to the Jacobian determinant of the velocity field. (default: 0)

.. option:: -nj, -neg-jac <w>

   "NegJac penalty weight" of free-form deformation. For a classic FFD transformation model
   this penalty term is equivalent to the volume preservation term. When applied to the SVFFD
   model, however, this penalty applies to the Jacobian determinant of the velocity field. (default: 0)

.. option:: -parout <file>

   Write parameters to the named configuration file. Note that after initialization of
   the registration, an interim configuration file is written. This file is overwritten
   once the registration finished with final configuration used during the course of the
   registration. (default: none)


Standard options
----------------

.. option:: -v, -verbose [n]

   Increase/Set verbosity of output messages. (default: 1)

.. option:: -debug [level]

   Increase/Set debug level for output of intermediate results. (default: 0)

.. option:: -version [major.minor]

   Print version and exit or set version to emulate.

.. option:: -revision

   Print revision (or version) number only and exit.

.. option:: -h, -help

   Print help and exit.


Terminal options
----------------

.. option:: -color, -nocolor

   Enable/disable colored output. (default: off)


Parallelization options
-----------------------

.. option:: -threads <n>

   Use maximal <n> threads for parallel execution. (default: automatic)
